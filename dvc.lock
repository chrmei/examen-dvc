schema: '2.0'
stages:
  validate:
    cmd: uv run python src/data/validate_data.py
    deps:
    - path: data/raw/raw.csv
      hash: md5
      md5: 617b56af2992376d5c3e91ad80823898
      size: 333757
    - path: src/data/validate_data.py
      hash: md5
      md5: 8337bb46d5e70ed50106cf6e311ec34f
      size: 12738
    outs:
    - path: data/processed/raw_validated.csv
      hash: md5
      md5: 076ef13ee7a9bf9dd021560d1f4084c3
      size: 330716
  feature_engineering:
    cmd: uv run python src/data/feature_engineering.py
    deps:
    - path: data/processed/raw_validated.csv
      hash: md5
      md5: 076ef13ee7a9bf9dd021560d1f4084c3
      size: 330716
    - path: src/data/feature_engineering.py
      hash: md5
      md5: 5a1f59dfd6f947fd5d3aa263802928a6
      size: 4647
    outs:
    - path: data/processed/raw_engineered.csv
      hash: md5
      md5: 05dc3fa3da0b1d7bba104d6268e17a24
      size: 465763
  split:
    cmd: uv run python src/data/data_split.py
    deps:
    - path: data/processed/raw_engineered.csv
      hash: md5
      md5: 05dc3fa3da0b1d7bba104d6268e17a24
      size: 465763
    - path: src/data/data_split.py
      hash: md5
      md5: 9d037cdee89938416d7e584514520ea1
      size: 4701
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 300eb652e54c9bc0f4d9995b40483c3c
      size: 79071
    - path: data/processed/X_train.csv
      hash: md5
      md5: 812bf20c36afe936cdf23249dada43e4
      size: 314992
    - path: data/processed/y_test.csv
      hash: md5
      md5: 4d011a3a33e2e945a6496789bbe57f57
      size: 6819
    - path: data/processed/y_train.csv
      hash: md5
      md5: 945ee70552b1a4f5bf07fff2778945e9
      size: 27069
  normalize:
    cmd: uv run python src/data/normalize.py
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 300eb652e54c9bc0f4d9995b40483c3c
      size: 79071
    - path: data/processed/X_train.csv
      hash: md5
      md5: 812bf20c36afe936cdf23249dada43e4
      size: 314992
    - path: data/processed/y_test.csv
      hash: md5
      md5: 4d011a3a33e2e945a6496789bbe57f57
      size: 6819
    - path: data/processed/y_train.csv
      hash: md5
      md5: 945ee70552b1a4f5bf07fff2778945e9
      size: 27069
    - path: src/data/normalize.py
      hash: md5
      md5: 583091473d6cff3201a269703756e9e0
      size: 5029
    outs:
    - path: data/processed/X_test_scaled.csv
      hash: md5
      md5: 2b29718f47180c02e3726cd37305f8e1
      size: 85807
    - path: data/processed/X_train_scaled.csv
      hash: md5
      md5: 26cf5c165c4dbd17831819991aabbed5
      size: 342036
    - path: models/data/scaler.pkl
      hash: md5
      md5: 6e8d53e9ef6b62a5d69d055cf820422e
      size: 1351
  gridsearch:
    cmd: uv run python src/models/grid_search.py
    deps:
    - path: data/processed/X_train_scaled.csv
      hash: md5
      md5: 26cf5c165c4dbd17831819991aabbed5
      size: 342036
    - path: data/processed/y_train.csv
      hash: md5
      md5: 945ee70552b1a4f5bf07fff2778945e9
      size: 27069
    - path: src/models/grid_search.py
      hash: md5
      md5: 49248dc09c999fab35a33854a0e8c579
      size: 6697
    outs:
    - path: models/data/best_params.pkl
      hash: md5
      md5: 7b366bd3f95f38225687238161b1ae2c
      size: 115
    - path: models/data/grid_search_results.csv
      hash: md5
      md5: e272b2e36e878697cafb4f2578e9fa62
      size: 169293
  train:
    cmd: uv run python src/models/training.py
    deps:
    - path: data/processed/X_train_scaled.csv
      hash: md5
      md5: 26cf5c165c4dbd17831819991aabbed5
      size: 342036
    - path: data/processed/y_train.csv
      hash: md5
      md5: 945ee70552b1a4f5bf07fff2778945e9
      size: 27069
    - path: models/data/best_params.pkl
      hash: md5
      md5: 7b366bd3f95f38225687238161b1ae2c
      size: 115
    - path: src/models/training.py
      hash: md5
      md5: 65c273eb340a5daeb342e28015b3a042
      size: 7394
    outs:
    - path: models/models/trained_model.pkl
      hash: md5
      md5: 987ed64a5c92322355cf111047a2fc05
      size: 571137
    - path: models/models/trained_model_with_history.pkl
      hash: md5
      md5: 48ab78f7bececf107ac2dc79b05ee80d
      size: 580296
  evaluate:
    cmd: uv run python src/models/evaluate.py
    deps:
    - path: data/processed/X_test_scaled.csv
      hash: md5
      md5: 2b29718f47180c02e3726cd37305f8e1
      size: 85807
    - path: data/processed/y_test.csv
      hash: md5
      md5: 4d011a3a33e2e945a6496789bbe57f57
      size: 6819
    - path: models/models/trained_model.pkl
      hash: md5
      md5: 987ed64a5c92322355cf111047a2fc05
      size: 571137
    - path: src/models/evaluate.py
      hash: md5
      md5: ef8b3708a2ac1f9f4188f8d8f76894c8
      size: 12073
    outs:
    - path: data/processed/predictions.csv
      hash: md5
      md5: ad2ce0cf5747717c208d2783823ec08e
      size: 25542
    - path: metrics/learning_curve.png
      hash: md5
      md5: 7ceff02ca527ef49cf4e9576d0540635
      size: 158370
    - path: metrics/scores.json
      hash: md5
      md5: e590d0f710b41e0db3d53ce661066829
      size: 294
